'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
var GlimpseServerRequest_1 = require("../messaging/GlimpseServerRequest");
var ResourceProviderHttp = (function () {
    function ResourceProviderHttp(metadataUri, deferredInitializationManager) {
        var _this = this;
        this.metadataUri = metadataUri;
        this.deferredInitializationManager = deferredInitializationManager;
        deferredInitializationManager.onInit(function (done) {
            GlimpseServerRequest_1.glimpseServerRequest(_this.metadataUri, function (metadataErr, metadataRes, metadataBody) {
                if (metadataErr) {
                    return done(metadataErr);
                }
                var metadata = JSON.parse(metadataBody);
                var exportConfigUri = metadata.resources[ResourceProviderHttp.EXPORT_CONFIG_RESOURCE_NAME];
                if (exportConfigUri) {
                    GlimpseServerRequest_1.glimpseServerRequest(exportConfigUri, function (exportErr, exportRes, exportBody) {
                        if (exportErr) {
                            return done(exportErr);
                        }
                        _this.resources = JSON.parse(exportBody);
                        done();
                    });
                }
                else {
                    _this.resources = {};
                    done();
                }
            });
        });
    }
    ResourceProviderHttp.prototype.getResourceDefinitions = function () {
        return this.resources;
    };
    return ResourceProviderHttp;
}());
ResourceProviderHttp.EXPORT_CONFIG_RESOURCE_NAME = 'export-config';
exports.ResourceProviderHttp = ResourceProviderHttp;

//# sourceMappingURL=../../maps/configuration/ResourceProviderHttp.js.map
