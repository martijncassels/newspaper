!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";window.Symbol&&n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(2),a=n(7),i=n(21),s=n(23),u=n(26),c=n(28),l=n(30),f=n(32),d=r(f),p=new o.MessagePublisher;(new a.XHRInspector).init(p),(new i.FetchInspector).init(p),(new s.ResourceTimingInspector).init(p),(new u.NavigationTimingInspector).init(p),(new c.ConsoleInspector).init(p),(new l.PerformanceInspector).init(p),(0,d.default)()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=[],r=0,o=0,a=0;a<e.length;a++)r+=e[a].length,e[a].length>t?(o!==a&&n.push({start:o,end:a}),n.push({start:a,end:a+1}),o=a+1,r=0):r>t&&(n.push({start:o,end:a}),o=a,r=e[a].length);return o<e.length&&n.push({start:o,end:e.length}),n}function a(e,t){for(var n=[],r=0;r<t.length;r++)if(t[r].end>t[r].start){var o=e.slice(t[r].start,t[r].end),a="["+o.join(",")+"]";n.push(a)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePublisher=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.chunkMessages=o,t.serializeRanges=a;var s=n(3),u=n(4),c=n(5),l=n(6),f=t.MessagePublisher=function(){function e(){r(this,e),this.ordinal=1,this.messageQueue=[],this.messageTimeout=void 0}return i(e,[{key:"createMessage",value:function(e,t){var n=Array.isArray(e)?e:[e],r={id:(0,u.getGuid)(),types:n,payload:t,context:{id:(0,c.getRequestId)(),type:"Request"},ordinal:this.ordinal++,agent:{source:"browser"},offset:0};return(0,l.addOffset)(performance.now(),r),r}},{key:"publishMessage",value:function(t){var n=this;t.payload=JSON.stringify(t),this.messageQueue.push(t),this.messageTimeout||(this.messageTimeout=setTimeout(function(){n.messageTimeout=void 0,n.sendData()},e.timeout))}},{key:"createAndPublishMessage",value:function(e,t){this.publishMessage(this.createMessage(e,t))}},{key:"sendPayload",value:function(e){(0,s.ajax)({url:(0,c.getMessageIngressUrl)(),method:"POST",body:e},function(){})}},{key:"sendData",value:function(){var e=this,t=1e5,n=[];this.messageQueue.forEach(function(e){n.push(JSON.stringify(e))});var r=o(n,t),i=a(n,r);i.forEach(function(t){e.sendPayload(t)}),this.messageQueue=[]}}]),e}();f.timeout=250},function(e,t){(function(e){function n(t){return t&&e.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:e.XMLHttpRequest?new XMLHttpRequest:void 0}function r(e,t,n){e[t]=e[t]||n}var o=["responseType","withCredentials","timeout","onprogress"];t.ajax=function(t,a){function i(e,t){return function(){l||(a(void 0===f.status?e:f.status,0===f.status?"Error":f.response||f.responseText||t,f),l=!0)}}var s=t.headers||{},u=t.body,c=t.method||(u?"POST":"GET"),l=!1,f=n(t.cors);f.open(c,t.url,!0);var d=f.onload=i(200);f.onreadystatechange=function(){4===f.readyState&&d()},f.onerror=i(null,"Error"),f.ontimeout=i(null,"Timeout"),f.onabort=i(null,"Abort"),u&&(r(s,"X-Requested-With","XMLHttpRequest"),e.FormData&&u instanceof e.FormData||r(s,"Content-Type","application/x-www-form-urlencoded"));for(var p,m=0,v=o.length;m<v;m++)p=o[m],void 0!==t[p]&&(f[p]=t[p]);for(var p in s)f.setRequestHeader(p,s[p]);return f.send(u),f}}).call(t,function(){return this}())},function(e,t){"use strict";function n(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function r(e,t,n){var r=new FileReader;r.onloadend=function(){n(r.result)},r.readAsText(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getGuid=n,t.convertBlobToText=r},function(e,t,n){"use strict";function r(){var e=document.getElementById("__glimpse_browser_agent").getAttribute("data-request-id");return e||(e=a(".Glimpse.RequestId")),e||(e=(0,d.getGuid)()),e}function o(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function a(e){var t=new RegExp("(?:(?:^|.*;\\s*)"+e+"\\s*\\=\\s*([^;]*).*$)|^.*$");return document.cookie.replace(t,"$1")}function i(e){var t=[];if(e.keys){var n=!0,r=!1,o=void 0;try{for(var a,i=e.keys()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;t.push(s)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}else e.forEach&&e.forEach(function(e,n){return t.push(n)});return t}function s(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];void 0!==r&&null!==r&&"string"!=typeof r&&(r=r.toString()),t[n.toLowerCase()]=r}return t}function u(){return document.getElementById("__glimpse_browser_agent").getAttribute("data-message-ingress-template")}function c(e){var t=document.createElement("a");t.href=e;var n=parseInt(t.port,10);return{protocol:t.protocol,hostname:t.hostname,port:isNaN(n)?void 0:n,pathname:t.pathname,search:t.search,hash:t.hash}}function l(e){var t=void 0!==e.port?":"+e.port:"",n=e.protocol+"//"+e.hostname+t+e.pathname;return e.search&&(n+=e.search),e.hash&&(n+=e.hash),n}function f(e){return p[e]?p[e]:p[e]=l(c(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getRequestId=r,t.addEvent=o,t.getCookie=a,t.getHeaderKeys=i,t.normalizeHeaders=s,t.getMessageIngressUrl=u,t.parseUrl=c,t.stringifyUrl=l,t.resolveUrl=f;var d=n(4),p={}},function(e,t){"use strict";function n(e,t){t.offset=e}function r(e,t){t.types.push("correlation-begin"),a(e,t)}function o(e,t,n){n.types.push("correlation-end"),n.payload.duration=t,a(e,n)}function a(e,t){t.types.push("correlation"),t.payload.correlationId=e}Object.defineProperty(t,"__esModule",{value:!0}),t.addOffset=n,t.addCorrelationBegin=r,t.addCorrelationEnd=o,t.addCorrelation=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.XHRInspector=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=r(s),c=n(6),l=n(9),f=n(10),d=n(11),p=r(d),m=n(12),v=n(5),y=n(13),h=r(y),g=n(17),E=n(18);t.XHRInspector=function(){function e(){o(this,e),this.initiatorRegExp=/xmlhttprequest/i,this.requests={}}return i(e,[{key:"createBodyProperty",value:function(e,t,n){if(t)if("string"==typeof t){var r=e["content-type"],o=(0,g.getMultiPartFormBoundary)(r),i={size:t.length,encoding:"utf8",isTruncated:t.length>l.MAX_HTTP_BODY_SIZE,parts:(0,g.getMultiPartFormParts)(o,t),content:t.slice(0,l.MAX_HTTP_BODY_SIZE)};setTimeout(function(){return n(i)},0)}else if(t instanceof Blob){var s=e["content-type"],u=t;(0,g.createBodyForBlob)(s,u,!0,function(e){n(e)})}else if(t instanceof ArrayBuffer||t.buffer&&t.buffer instanceof ArrayBuffer){var c=void 0;c=t instanceof ArrayBuffer?t:t.buffer;var f={size:c.byteLength,encoding:"none",isTruncated:!0,parts:[],content:""};setTimeout(function(){return n(f)},0)}else if(t instanceof Document){var d=(0,g.createEmptyBody)(!0);setTimeout(function(){return n(d)},0)}else if(t instanceof FormData){var p=(0,g.createEmptyBody)(!0);setTimeout(function(){return n(p)},0)}else if("object"===("undefined"==typeof t?"undefined":a(t))){var m=(0,g.createEmptyBody)(!0);setTimeout(function(){return n(m)},0)}else{var v=(0,g.createEmptyBody)(!0);setTimeout(function(){return n(v)},0)}else{var y=(0,g.createEmptyBody)(!1);setTimeout(function(){return n(y)},0)}}},{key:"before",value:function(e){var t=this,n=e.data,r=(0,v.parseUrl)(n.url),o=(0,v.normalizeHeaders)(n.headers);(0,E.getStackTrace)(function(a){t.createBodyProperty(o,n.body,function(i){var s=(0,m.getDateTime)(new Date(e.timeStamp)),u=t.messagePublisher.createMessage(["data-http-request","call-stack"],{correlationId:n.id,protocol:{identifier:r.protocol.replace(/\:$/,"").toLowerCase()},url:n.url,method:n.method,startTime:s,timing:{startTime:0},headers:o,isAjax:!0,body:i,frames:a.slice(0,1)});(0,c.addOffset)(e.offset,u),t.messagePublisher.publishMessage(u)})})}},{key:"after",value:function(e,t){var n=this,r=e.data;(0,g.tryFindResourceTimingObject)(e.data.id,this.initiatorRegExp,r.url,t.startTimeOffset,function(o){var a=o?o.startTime:t.startTimeOffset,i=o&&o.responseStart>=o.startTime?o.responseStart-o.startTime:void 0,s=o?o.responseEnd-o.startTime:e.offset-t.startTimeOffset,u=(0,h.default)(r.xhr.getAllResponseHeaders());n.createBodyProperty(u,r.body,function(t){var o=n.messagePublisher.createMessage("data-http-response",{correlationId:r.id,url:r.url,headers:u,statusCode:r.statusCode,statusMessage:r.statusMessage,endTime:(0,m.getDateTime)(new Date(e.timeStamp)),duration:s,timing:{startTime:0,responseEnd:s},body:t});void 0!==i&&(o.payload.timing.responseStart=i),(0,c.addOffset)(a,o),n.messagePublisher.publishMessage(o)})})}},{key:"numOutstandingRequests",value:function(){return Object.keys(this.requests).length}},{key:"init",value:function(e){var t=this;this.messagePublisher=e,p.default.on(f.EVENT_XHR_REQUEST_SENT,function(e){t.requests[e.data.id]={startTimeStamp:e.timeStamp,startTimeOffset:e.offset},t.before(e)}),p.default.on(f.EVENT_XHR_RESPONSE_RECEIVED,function(e){var n=t.requests[e.data.id];return n?(t.after(e,n),void delete t.requests[e.data.id]):void u.default.error("Glimpse Internal Error: could not find associated master data, some inspection data will be lost.")}),p.default.on(f.EVENT_XHR_ERROR,function(e){delete t.requests[e.data.id]}),p.default.on(f.EVENT_XHR_ABORT,function(e){delete t.requests[e.data.id]})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t.GlimpseLogger=function(){function e(t){r(this,e),this.logToConsole=t}return o(e,[{key:"error",value:function(e){this.logToConsole&&console.error(e)}}]),e}(),i=new a(!1);t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MAX_HTTP_BODY_SIZE=132e3},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.XHRProxy=t.EVENT_XHR_ABORT=t.EVENT_XHR_ERROR=t.EVENT_XHR_RESPONSE_RECEIVED=t.EVENT_XHR_REQUEST_SENT=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),s=r(i),u=n(11),c=r(u),l=n(4),f=n(5),d=t.EVENT_XHR_REQUEST_SENT="invoke|pre|XMLHttpRequest.request-sent",p=t.EVENT_XHR_RESPONSE_RECEIVED="notify|XMLHttpRequest.response-received",m=t.EVENT_XHR_ERROR="notify|XMLHttpRequest.error",v=t.EVENT_XHR_ABORT="notify|XMLHttpRequest.abort",y=t.XHRProxy=function(){function e(){o(this,e)}return a(e,[{key:"isSupported",value:function(){return!(!window||"undefined"==typeof window.XMLHttpRequest)}},{key:"init",value:function(){function t(){function e(e,t){var a={};r.addEventListener("readystatechange",function(){if(r.readyState===n.DONE){var e={id:o,xhr:r,url:(0,f.resolveUrl)(t),statusCode:r.status,statusMessage:r.statusText,bodyType:r.responseType,body:r.response};c.default.publish(p,e)}}),r.addEventListener("error",function(){var e={id:o,xhr:r,error:r.statusText};c.default.publish(m,e)}),r.addEventListener("abort",function(){var e={id:o,xhr:r};c.default.publish(v,e)});var i=r.send;r.send=function(n){var s={id:o,xhr:r,method:e,url:(0,f.resolveUrl)(t),body:n,headers:a};c.default.publish(d,s);for(var u=arguments.length,l=Array(u>1?u-1:0),p=1;p<u;p++)l[p-1]=arguments[p];i.call.apply(i,[this,n].concat(l))};var s=r.setRequestHeader;r.setRequestHeader=function(e,t){a[e]=t;for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];s.call.apply(s,[this,e,t].concat(r))}}function t(e,t){var n=r.send,a={},i=r.setRequestHeader;r.setRequestHeader=function(e,t){a[e]=t;for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];i.call.apply(i,[this,e,t].concat(r))},r.send=function(i){var s={id:o,xhr:r,method:e,url:(0,f.resolveUrl)(t),body:i,headers:a};c.default.publish(d,s);try{for(var u=arguments.length,l=Array(u>1?u-1:0),v=1;v<u;v++)l[v-1]=arguments[v];n.call.apply(n,[this,i].concat(l))}catch(e){var y={id:o,xhr:r,error:e.message};throw c.default.publish(m,y),e}var h={id:o,xhr:r,url:(0,f.resolveUrl)(t),statusCode:r.status,statusMessage:r.statusText||"",bodyType:r.responseType,body:r.response};c.default.publish(p,h)}}var r=new n,o=(0,l.getGuid)(),a=r.open;return r.open=function(n,r){for(var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length,s=Array(i>3?i-3:0),u=3;u<i;u++)s[u-3]=arguments[u];var c=a.call.apply(a,[this,n,r,o].concat(s));return r!==(0,f.getMessageIngressUrl)()&&(o?e(n,r):t(n,r)),c},r}if(e.isInitialized)return void s.default.error("Glimpse Error: Cannot initialize the XHR Proxy more than once.");var n=window.XMLHttpRequest;for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);window.XMLHttpRequest=t,e.isInitialized=!0}}]),e}();y.isInitialized=!1},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.listeners={}}return r(e,[{key:"publish",value:function(e,t){var n=this.listeners[e];if(!n||0===n.length)return!1;var r=!1,o={offset:performance.now(),timeStamp:Date.now(),data:t},a=!0,i=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r=!0,l.listener(o)}}catch(e){i=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}return r}},{key:"on",value:function(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({listener:t}),this}},{key:"removeEventListener",value:function(e,t){var n=this.listeners[e];if(!n)return this;for(var r=0;r<n.length;r++)if(n[r].listener===t){this.listeners[e].splice(r,1);break}return this}},{key:"removeAllListeners",value:function(e){return e?this.listeners[e]&&(this.listeners[e]=[]):this.listeners={},this}},{key:"listenerCount",value:function(e){return this.listeners[e]?this.listeners[e].length:0}}]),e}();t.default=new o},function(e,t){"use strict";function n(e){return e<10?"0"+e:e}function r(e){return e<10?"00"+e:e<100?"0"+e:e}function o(e){var t=e.getTimezoneOffset(),r=t>=0?"+":"-";t=Math.abs(t);var o=n(Math.floor(t/60)),a=n(t%60);return r+o+a}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+"."+r(e.getMilliseconds())+o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDateTime=a},function(e,t,n){var r=n(14),o=n(15),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return o(r(e).split("\n"),function(e){var n=e.indexOf(":"),o=r(e.slice(0,n)).toLowerCase(),i=r(e.slice(n+1));"undefined"==typeof t[o]?t[o]=i:a(t[o])?t[o].push(i):t[o]=[t[o],i]}),t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){function r(e,t,n){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(e)?o(e,t,n):"string"==typeof e?a(e,t,n):i(e,t,n)}function o(e,t,n){for(var r=0,o=e.length;r<o;r++)c.call(e,r)&&t.call(n,e[r],r,e)}function a(e,t,n){for(var r=0,o=e.length;r<o;r++)t.call(n,e.charAt(r),r,e)}function i(e,t,n){for(var r in e)c.call(e,r)&&t.call(n,e[r],r,e)}var s=n(16);e.exports=r;var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t,n){"use strict";function r(e){var t="none",n=!0,r=!1,o=void 0;try{for(var a,i=d[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(s.test(e.type)){t="utf8";break}}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t}function o(e){return{size:0,encoding:"none",content:"",isTruncated:e}}function a(e,t,n,a){if(t.size){var i=r(t);switch(i){case"utf8":(0,l.convertBlobToText)(t,i,function(r){var o=s(e),c=o&&n?u(o,r):[];r=r.slice(0,f.MAX_HTTP_BODY_SIZE);var l={size:t.size,encoding:i,content:r,isTruncated:t.size>r.length};c&&n&&(l.parts=c),a(l)});break;default:setTimeout(function(){return a({size:t.size,encoding:i,content:"",isTruncated:!0})},0)}}else setTimeout(function(){return a(o(!1))},0)}function i(e){var t={};e=e.trim();var n=e.split("\r\n");return n.forEach(function(e){var n=e.indexOf(":");if(n>0){var r=e.substring(0,n).trim().toLowerCase(),o=e.substring(n+1,e.length).trim();t[r]||(t[r]=[]),t[r].push(o)}}),t}function s(e){var t=p.exec(e);if(t)return t[2]}function u(e,t){e="--"+e;var n="^((\\r\\n)?"+e+"\\s*?\\r\\n)",r=new RegExp(n,"gm"),o="([\\s\\S]*?)(\\r\\n\\r\\n)([\\s\\S]*?)(\\r\\n"+e+")((--)|(\\s*?\\r\\n))",a=new RegExp(o,"gm"),s=r.exec(t),u=[];if(s)for(a.lastIndex=r.lastIndex-2;;){var c=a.exec(t);if(!c)break;var l=c[1]?c[1].length:0,f=c.index+l+c[2].length,d=c[1]?i(c[1]):{},p=c[3]?c[3].length:0;if(u.push({headers:d,bodyStartIndex:c.index+c[1].length+c[2].length,bodyEndIndex:f+p,bodyLength:p}),c[6])break}return u}function c(e,t,n,r,o){function a(){function u(e){return Math.abs(e.startTime-r)}for(var c=performance.getEntriesByType("resource"),l=void 0,f=[],d=0;d<c.length;d++){var p=c[d];if(e&&p.__glimpse_requestId===e){l=p;break}t.test(p.initiatorType)&&p.name===n&&r<=p.startTime&&!p.__glimpse_requestId&&f.push(p)}return l||(f.sort(function(e,t){var n=u(e),r=u(t);return n-r}),f.length>0&&(l=f[0],l.__glimpse_requestId=e)),l||s>=i?o(l):(s*=2,setTimeout(a,s)),l}if(!performance||!performance.getEntriesByType)return void setTimeout(function(){return o(void 0)});var i=1024,s=1;setTimeout(a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.createEmptyBody=o,t.createBodyForBlob=a,t.getMultiPartFormBoundary=s,t.getMultiPartFormParts=u,t.tryFindResourceTimingObject=c;var l=n(4),f=n(9),d=[/^text\//,/^application\/.*?xml/,/^application\/json/,/^application\/javascript/,/^application\/x-www-form-urlencoded/,/^multipart\/form-data/],p=/\s*(multipart\/form-data)\s*;.*boundary\s*=\s*"?([0-9a-zA-Z'()+_,-.\/:=?]+)"?/i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){function t(){var e=new Error;if(!e.stack)try{throw new Error}catch(t){e=t}return e}for(var n=i.parse(t()),r=0;r<n.length;r++)if(n[r].fileName&&!n[r].fileName.endsWith("/glimpse/agent/agent.js?hash={hash}")){n=n.slice(r);break}var o=[];n.forEach(function(e,t){o[t]={fileName:e.fileName,functionName:e.functionName,lineNumber:e.lineNumber,columnNumber:e.columnNumber}}),window.setTimeout(function(){e(o)},0)}Object.defineProperty(t,"__esModule",{value:!0}),t.getStackTrace=o;var a=n(19),i=r(a)},function(e,t,n){var r,o,a;!function(i,s){"use strict";o=[n(20)],r=s,a="function"==typeof r?r.apply(t,o):r,!(void 0!==a&&(e.exports=a))}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=t.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(t){var r=t.stack.split("\n").filter(function(e){return!!e.match(n)},this);return r.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),o=n.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e({functionName:o,fileName:a,lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseFFOrSafari:function(t){var n=t.stack.split("\n").filter(function(e){return!e.match(r)},this);return n.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new e({functionName:t});var n=t.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new e({functionName:o,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],a=2,i=r.length;a<i;a+=2){var s=n.exec(r[a]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:r[a]}))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],a=0,i=r.length;a<i;a+=2){var s=n.exec(r[a]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[a]}))}return o},parseOpera11:function(n){var r=n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return r.map(function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),a=r.shift()||"",i=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:i,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)}}})},function(e,t,n){var r,o,a;!function(n,i){"use strict";o=[],r=i,a="function"==typeof r?r.apply(t,o):r,!(void 0!==a&&(e.exports=a))}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function r(e){if(e instanceof Object)for(var n=0;n<u.length;n++)e.hasOwnProperty(u[n])&&void 0!==e[u[n]]&&this["set"+t(u[n])](e[u[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],i=["fileName","functionName","source"],s=["args"],u=o.concat(a,i,s);r.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof r)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new r(e)}},toString:function(){var t=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",o=e(this.getLineNumber())?":"+this.getLineNumber():"",a=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+n+r+o+a}};for(var c=0;c<o.length;c++)r.prototype["get"+t(o[c])]=n(o[c]),r.prototype["set"+t(o[c])]=function(e){return function(t){this[e]=Boolean(t)}}(o[c]);for(var l=0;l<a.length;l++)r.prototype["get"+t(a[l])]=n(a[l]),r.prototype["set"+t(a[l])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(a[l]);for(var f=0;f<i.length;f++)r.prototype["get"+t(i[f])]=n(i[f]),r.prototype["set"+t(i[f])]=function(e){return function(t){this[e]=String(t)}}(i[f]);return r})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FetchInspector=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),s=r(i),u=n(6),c=n(22),l=n(11),f=r(l),d=n(12),p=n(5),m=n(17),v=n(18);t.FetchInspector=function(){function e(){o(this,e),this.initiatorRexExp=/(^$)|(other)/i,this.requests={}}return a(e,[{key:"createHeaders",value:function(e){var t={},n=(0,p.getHeaderKeys)(e),r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;t[u]=e.get(u)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return t}},{key:"getContentTypeHeader",value:function(e){var t=void 0;if(t=e.get("content-type"),!t){var n=(0,p.getHeaderKeys)(e),r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;if("content-type"===u.toLowerCase()){t=e[u];break}}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}return t}},{key:"before",value:function(e){var t=this,n=e.data;(0,v.getStackTrace)(function(r){var o=function(o){var a=(0,p.parseUrl)(n.request.url),i=(0,d.getDateTime)(new Date(e.timeStamp)),s=t.messagePublisher.createMessage(["data-http-request","call-stack"],{correlationId:n.id,protocol:{identifier:a.protocol.replace(/\:$/,"").toLowerCase()},url:n.request.url,method:n.request.method,startTime:i,timing:{startTime:0},headers:t.createHeaders(n.request.headers),isAjax:!0,body:o,frames:r.slice(0,1)});(0,u.addOffset)(e.offset,s),t.messagePublisher.publishMessage(s)};n.request.blob().then(function(e){var r=t.getContentTypeHeader(n.request.headers);(0,m.createBodyForBlob)(r,e,!0,function(e){o(e)})},function(e){o((0,m.createEmptyBody)(!0))})})}},{key:"after",value:function(e,t){var n=this,r=e.data;r.response.blob().then(function(o){var a=performance.now();(0,m.tryFindResourceTimingObject)(e.data.id,n.initiatorRexExp,e.data.response.url,t.startTimeOffset,function(i){var s=i?i.startTime:t.startTimeOffset,c=0,l=i&&i.responseStart>=i.startTime?i.responseStart-i.startTime:void 0,f=i?i.responseEnd-i.startTime:a-t.startTimeOffset,p=n.getContentTypeHeader(r.response.headers);(0,m.createBodyForBlob)(p,o,!0,function(t){var o=void 0;switch(r.response.type){case"error":return;case"opaque":o=-1;break;case"opaqueredirect":o=-2;break;default:o=r.response.status}var a=n.messagePublisher.createMessage("data-http-response",{correlationId:r.id,url:r.response.url,headers:n.createHeaders(r.response.headers),statusCode:o,statusMessage:r.response.statusText,endTime:(0,d.getDateTime)(new Date(e.timeStamp)),duration:f,timing:{startTime:c,responseEnd:f},body:t});void 0!==l&&(a.payload.timing.responseStart=l),(0,u.addOffset)(s,a),n.messagePublisher.publishMessage(a)})})})}},{key:"numOutstandingRequests",value:function(){return Object.keys(this.requests).length}},{key:"init",value:function(e){var t=this;this.messagePublisher=e,f.default.on(c.EVENT_FETCH_REQUEST_SENT,function(e){t.requests[e.data.id]={startTimeStamp:e.timeStamp,startTimeOffset:e.offset},t.before(e)}),f.default.on(c.EVENT_FETCH_RESPONSE_RECEIVED,function(e){var n=t.requests[e.data.id];return n?(t.after(e,n),void delete t.requests[e.data.id]):void s.default.error("Glimpse Internal Error: could not find associated master data, some inspection data will be lost.")}),f.default.on(c.EVENT_FETCH_ERROR,function(e){delete t.requests[e.data.id]})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FetchProxy=t.EVENT_FETCH_ERROR=t.EVENT_FETCH_RESPONSE_RECEIVED=t.EVENT_FETCH_REQUEST_SENT=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=r(i),u=n(4),c=t.EVENT_FETCH_REQUEST_SENT="invoke|pre|fetch.request-sent",l=t.EVENT_FETCH_RESPONSE_RECEIVED="notify|fetch.response-received",f=t.EVENT_FETCH_ERROR="notify|fetch.error";t.FetchProxy=function(){function e(){o(this,e)}return a(e,[{key:"isSupported",value:function(){return!(!self||"undefined"==typeof self.fetch)}},{key:"init",value:function(){if(self.fetch){var e=self.fetch;self.fetch=function(t,n){for(var r=void 0,o=arguments.length,a=Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];if(t instanceof Request)r=t.clone();else try{r=new Request(t,n)}catch(r){return e.call.apply(e,[this,t,n].concat(a))}var d=(0,u.getGuid)(),p={id:d,request:r};s.default.publish(c,p);var m=e.call.apply(e,[this,t,n].concat(a));return m.then(function(e){var t={id:d,response:e.clone()};s.default.publish(l,t)},function(e){var t={id:d,error:e};s.default.publish(f,t)}),m}}}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceTimingInspector=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24),s=n(11),u=r(s);t.ResourceTimingInspector=function(){function e(){o(this,e)}return a(e,[{key:"init",value:function(e){u.default.on(i.EVENT_RESOURCE_TIMING_COLLECTED,function(t){e.createAndPublishMessage("browser-resource",{timings:t.data})})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceTimingProxy=t.EVENT_RESOURCE_TIMING_COLLECTED=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=r(i),u=n(5),c=n(25),l=r(c),f=1e3,d=t.EVENT_RESOURCE_TIMING_COLLECTED="notify|performance.resource-collected";t.ResourceTimingProxy=function(){function e(){o(this,e)}return a(e,[{key:"isSupported",value:function(){return!(!l.default||!l.default.getEntriesByType)}},{key:"init",value:function(){function e(e){return{name:e.name,startTime:e.startTime,duration:e.duration,
initiatorType:e.initiatorType,nextHopProtocol:e.nextHopProtocol,redirectStart:e.redirectStart,redirectEnd:e.redirectEnd,fetchStart:e.fetchStart,domainLookupStart:e.domainLookupStart,domainLookupEnd:e.domainLookupEnd,connectStart:e.connectStart,connectEnd:e.connectEnd,secureConnectionStart:e.secureConnectionStart,requestStart:e.requestStart,responseStart:e.responseStart,responseEnd:e.responseEnd,transferSize:e.transferSize,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize}}function t(){var r=l.default.getEntriesByType("resource"),o=[],a=(0,u.getMessageIngressUrl)(),i=!0,c=!1,p=void 0;try{for(var m,v=r[Symbol.iterator]();!(i=(m=v.next()).done);i=!0){var y=m.value,h=y.startTime+"#"+y.name;n[h]||y.name.indexOf(a)!==-1||(n[h]=!0,o.push(e(y)))}}catch(e){c=!0,p=e}finally{try{!i&&v.return&&v.return()}finally{if(c)throw p}}o.length&&s.default.publish(d,o),setTimeout(t,f)}var n={};t()}}]),e}()},function(e,t){"use strict";function n(){return window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationTimingInspector=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(27),s=n(11),u=r(s);t.NavigationTimingInspector=function(){function e(){o(this,e)}return a(e,[{key:"init",value:function(e){u.default.on(i.EVENT_NAVIGATION_TIMING_COLLECTED,function(t){var n=t.data,r=Object.assign({loadDuration:n.loadEventEnd-n.fetchStart,domReadyDuration:n.domComplete-n.domInteractive,readyStartDuration:n.fetchStart-n.navigationStart,redirectDuration:n.redirectEnd-n.redirectStart,appcacheDuration:n.domainLookupStart-n.fetchStart,unloadEventDuration:n.unloadEventEnd-n.unloadEventStart,lookupDomainDuration:n.domainLookupEnd-n.domainLookupStart,connectDuration:n.connectEnd-n.connectStart,requestDuration:n.responseEnd-n.requestStart,initDomTreeDuration:n.domInteractive-n.responseEnd,loadEventDuration:n.loadEventEnd-n.loadEventStart,networkRequestDuration:n.requestStart-n.navigationStart,networkResponseDuration:n.responseEnd-n.responseStart,serverDuration:n.responseEnd-n.requestStart,browserDuration:n.loadEventEnd-n.responseStart,totalDuration:n.loadEventEnd-n.navigationStart},t.data);r.networkDuration=r.networkRequestDuration+r.networkResponseDuration,e.createAndPublishMessage("browser-navigation-timing",r)})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationTimingProxy=t.EVENT_NAVIGATION_TIMING_COLLECTED=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=r(i),u=n(25),c=r(u),l=n(5),f=t.EVENT_NAVIGATION_TIMING_COLLECTED="notify|performance.navigation-timing";t.NavigationTimingProxy=function(){function e(){o(this,e)}return a(e,[{key:"isSupported",value:function(){return!(!c.default||!c.default.timing)}},{key:"init",value:function(){var e=this;(0,l.addEvent)(window,"load",function(){setTimeout(function(){e.processTimings(c.default.timing)})})}},{key:"processEntry",value:function(e){return{connectEnd:e.connectEnd,connectStart:e.connectStart,domComplete:e.domComplete,domContentLoadedEventEnd:e.domContentLoadedEventEnd,domContentLoadedEventStart:e.domContentLoadedEventStart,domInteractive:e.domInteractive,domLoading:e.domLoading,domainLookupEnd:e.domainLookupEnd,domainLookupStart:e.domainLookupStart,fetchStart:e.fetchStart,firstPaint:e.firstPaint,firstPaintDuration:0,loadEventEnd:e.loadEventEnd,loadEventStart:e.loadEventStart,navigationStart:e.navigationStart,redirectEnd:e.redirectEnd,redirectStart:e.redirectStart,requestStart:e.requestStart,responseEnd:e.responseEnd,responseStart:e.responseStart,secureConnectionStart:e.secureConnectionStart,unloadEventEnd:e.unloadEventEnd,unloadEventStart:e.unloadEventStart}}},{key:"processTimings",value:function(e){var t=this.processEntry(e);if(void 0===t.firstPaint){var n=0,r=0;if(window.chrome&&window.chrome.loadTimes){var o=window.chrome.loadTimes();n=1e3*o.firstPaintTime,r=n-1e3*o.startLoadTime}else"number"==typeof e.msFirstPaint&&(n=e.msFirstPaint,r=n-e.navigationStart);t.firstPaint=n,t.firstPaintDuration=r}s.default.publish(f,t)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleInspector=t.LogMessageTypes=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(29),u=n(11),c=r(u),l=n(4),f=n(6),d=n(18),p=t.LogMessageTypes=void 0;!function(e){e[e.json=0]="json",e[e.xml=1]="xml",e[e.table=2]="table",e[e.assert=3]="assert",e[e.count=4]="count",e[e.timespan_begin=5]="timespan_begin",e[e.timespan_end=6]="timespan_end",e[e.group_begin=7]="group_begin",e[e.group_end=8]="group_end"}(p||(t.LogMessageTypes=p={}));t.ConsoleInspector=function(){function e(){var t=this;o(this,e),this.countMap={},this.stack={group:[],profile:[]},this.map={time:{}},this.mapNull={time:void 0},this.methods={assert:{level:"Error",processor:function(e,n){return t.assert(e,n)}},count:{level:"Debug",processor:function(e,n){return t.count(e,n)},tokenTypeByPass:!0},debug:{level:"Debug",nullByPass:!0},dir:{level:"Log",nullByPass:!0,processor:function(e,n){return t.dir(e,n,p.json)},tokenTypeByPass:!0},dirxml:{level:"Log",nullByPass:!0,processor:function(e,n){return t.dir(e,n,p.xml)},tokenTypeByPass:!0},error:{level:"Error",nullByPass:!0},group:{level:void 0,processor:function(e,n){return t.groupStart(e,n,!1)}},groupCollapsed:{level:void 0,processor:function(e,n){return t.groupStart(e,n,!0)}},groupEnd:{level:void 0,processor:function(e,n){return t.groupEnd(e,n)}},info:{level:"Info",nullByPass:!0},log:{level:"Log",nullByPass:!0},profile:{level:"Debug",processor:function(e,n){return t.profileStart(e,n)},tokenTypeByPass:!0},profileEnd:{level:"Debug",processor:function(e,n){return t.profileEnd(e,n)},tokenTypeByPass:!0},table:{level:"Log",nullByPass:!0,processor:function(e,n){return t.applyType(e,n,p.table)},tokenTypeByPass:!0},time:{level:"Debug",processor:function(e,n){return t.mapStart("time",e,n,p.timespan_begin)},tokenTypeByPass:!0},timeEnd:{level:"Debug",processor:function(e,n){return t.mapEnd("time",e,n,p.timespan_end)},tokenTypeByPass:!0},timeStamp:{level:"Debug",processor:function(e,n){return t.timeStamp(e,n)},tokenTypeByPass:!0},trace:{level:"Debug",processor:function(e,n){return t.trace(e,n)}},warn:{level:"Warning",nullByPass:!0}}}return i(e,[{key:"init",value:function(e){var t=this;c.default.on(s.NOTIFY_CONSOLE_EVENT_OCCURED,function(n){var r=n.data,o={method:r.method,arguments:r.arguments,offset:n.offset};t.publishMessage(e,o)})}},{key:"publishMessage",value:function(e,t){var n=this.methods[t.method];if(t.arguments&&t.arguments.constructor===Array&&(!n.nullByPass||0!==t.arguments.length)){var r={message:t.arguments,library:"Browser Console",level:n.level},o=e.createMessage("log-write",r);(0,f.addOffset)(t.offset,o);var a=!1;n.processor&&(a=n.processor(o,t)||!1),n.tokenTypeByPass||this.deriveTokenType(o),a||(0,d.getStackTrace)(function(t){o.payload.frames=t,o.types.push("call-stack"),e.publishMessage(o)})}}},{key:"count",value:function(e,t){var n=t.arguments.length>0?String(t.arguments[0]):"";e.payload.message=n;var r=(this.countMap[n]||0)+1;this.countMap[n]=r,this.applyType(e,t,p.count),e.payload.count=r}},{key:"assert",value:function(e,t){var n=t.arguments.length>0&&t.arguments[0];return!!n||void(e.payload.message=e.payload.message.slice(1))}},{key:"dir",value:function(e,t,n){var r=t.arguments.length>0?[t.arguments[0]]:t.arguments,o=!1,i=r[0];if(n===p.xml&&i&&"object"===("undefined"==typeof i?"undefined":a(i))&&i.getElementsByTagName&&"outerHTML"in i){var s=i.getElementsByTagName("*").length;s>100?r="Node with more than `100` decendents aren't supported.":(i=i.outerHTML,i.length>2500?r="Node with more than `2500` characters aren't supported.":r[0]=i),o=!0}else n===p.json&&(o=!0);o?(e.payload.message=r,this.applyType(e,t,n)):this.deriveTokenType(e)}},{key:"timeStamp",value:function(e,t){this.getAndApplyLabel(e,t)}},{key:"groupStart",value:function(e,t,n){e.payload.isCollapsed=n,this.stackStart("group",e,t,p.group_begin)}},{key:"groupEnd",value:function(e,t){return this.stackEnd("group",e,t,p.group_end)}},{key:"profileStart",value:function(e,t){this.getAndApplyLabel(e,t),this.stackStart("profile",e,t,p.timespan_begin)}},{key:"profileEnd",value:function(e,t){this.getAndApplyLabel(e,t);var n=this.stackEnd("profile",e,t,p.timespan_end);return n}},{key:"trace",value:function(e,t){e.types.push("log-display-callstack"),e.payload.message=Array.prototype.slice.call(e.payload.message,0),void 0===e.payload.message[0]?e.payload.message[0]="Trace:":e.payload.message[0]="Trace: "+e.payload.message[0]}},{key:"applyType",value:function(e,t,n){var r=p[n].replace("_","-");e.types.push("log-"+r)}},{key:"getAndApplyLabel",value:function(e,t){var n=t.arguments.length>0?String(t.arguments[0]):void 0;return e.payload.message=n,n}},{key:"stackStart",value:function(e,t,n,r){var o=this.coreStart(t,n,r);this.stack[e].push(o)}},{key:"stackEnd",value:function(e,t,n,r){var o=this.stack[e].pop();return!o||void this.coreEnd(o,t,n,r)}},{key:"mapStart",value:function(e,t,n,r){var o=this.getAndApplyLabel(t,n),a=this.coreStart(t,n,r);void 0!==o?this.map[e][o]=a:this.mapNull[e]=a}},{key:"mapEnd",value:function(e,t,n,r){var o=this.getAndApplyLabel(t,n),a=void 0!==o?this.map[e][o]:this.mapNull[e];a?void 0!==o?delete this.map[e][o]:this.mapNull[e]=void 0:a={correlationId:(0,l.getGuid)(),time:0},this.coreEnd(a,t,n,r)}},{key:"coreStart",value:function(e,t,n){var r=(0,l.getGuid)(),o=t.offset;return(0,f.addCorrelationBegin)(r,e),this.applyType(e,t,n),{correlationId:r,time:o}}},{key:"coreEnd",value:function(e,t,n,r){var o=n.offset;this.applyType(t,n,r),(0,f.addCorrelationEnd)(e.correlationId,o-e.time,t)}},{key:"deriveTokenType",value:function(e){void 0!==e.payload.message&&null!==e.payload.message&&"string"!==e.payload.message&&(e.types.push("log-token-printf"),e.payload.tokenSupport="browser")}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleProxy=t.NOTIFY_CONSOLE_EVENT_OCCURED=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=r(i),u=t.NOTIFY_CONSOLE_EVENT_OCCURED="notify|event|console";t.ConsoleProxy=function(){function e(){o(this,e),this.methods=["assert","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"]}return a(e,[{key:"isSupported",value:function(){try{console.log.__glimpse_enabled=!0,delete console.log.__glimpse_enabled}catch(e){return!1}return!(!window||"undefined"==typeof window.console)}},{key:"init",value:function(){this.methods.forEach(function(e){e&&console[e]&&!console[e].__glimpse_original&&(console[e]=function(e){var t=console[e],n=function(){var n=Array.prototype.slice.call(arguments);return s.default.publish(u,{method:e,arguments:n}),t.apply(this,arguments)};return t.__glimpse_proxy=n,n.__glimpse_original=t,n}(e))})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceInspector=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=r(i),u=n(31),c=n(6),l=n(18);t.PerformanceInspector=function(){function e(){o(this,e),this.markIdCache={}}return a(e,[{key:"init",value:function(e){var t=this;this.messagePublisher=e,s.default.on(u.EVENT_PERFORMANCE_MARK,function(e){return t.mark(e)}),s.default.on(u.EVENT_PERFORMANCE_MEASURE,function(e){return t.measure(e)})}},{key:"mark",value:function(e){var t=this,n=e.data,r=this.messagePublisher.createMessage("debug-timestamp",{name:n.name});this.markIdCache[n.id]=r.id,r.offset=n.startTime,n.isBuiltIn?setTimeout(function(){return t.messagePublisher.publishMessage(r)},0):(0,l.getStackTrace)(function(e){r.payload.frames=e,t.messagePublisher.publishMessage(r)})}},{key:"measure",value:function(e){var t=e.data,n=this.markIdCache[t.startMarkId],r=this.markIdCache[t.endMarkId],o=this.messagePublisher.createMessage("debug-timestamp-measurement",{correlationMessageIds:[n,r],category:"duration",name:t.name});(0,c.addOffset)(e.offset,o),this.messagePublisher.publishMessage(o)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceProxy=t.EVENT_PERFORMANCE_MEASURE=t.EVENT_PERFORMANCE_MARK=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),s=r(i),u=n(25),c=r(u),l=n(4),f=t.EVENT_PERFORMANCE_MARK="invoke|post|performance.mark",d=t.EVENT_PERFORMANCE_MEASURE="invoke|post|performance.measure",p=1;t.PerformanceProxy=function(){function e(){o(this,e),this.markIdCache={}}return a(e,[{key:"getMarkId",value:function(e){if(this.markIdCache[e])return this.markIdCache[e];if(c.default.timing[e]){var t="__glimpse_measure-"+p++;this.oldMeasure.call(c.default,t,e,e);var n=this.getPerformanceEntryByName(t),r=this.initializeMark(e,n.startTime,!0);return c.default.clearMeasures(t),s.default.publish(f,r),r.id}}},{key:"getPerformanceEntryByName",value:function(e){return c.default.getEntriesByName(e).pop()}},{key:"initializeMark",value:function(e,t,n){var r=(0,l.getGuid)(),o={id:r,name:e,startTime:t,isBuiltIn:n};return this.markIdCache[e]=r,o}},{key:"instrumentMark",value:function(){var e=c.default.mark,t=this;c.default.mark=function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];e.call.apply(e,[this,n].concat(o));var i=t.getPerformanceEntryByName(n),u=t.initializeMark(i.name,i.startTime,!1);s.default.publish(f,u)}}},{key:"instrumentMeasure",value:function(){this.oldMeasure=c.default.measure;var e=this;c.default.measure=function(t,n,r){for(var o,a=arguments.length,i=Array(a>3?a-3:0),u=3;u<a;u++)i[u-3]=arguments[u];(o=e.oldMeasure).call.apply(o,[this,t,n,r].concat(i));var c=e.getMarkId(n),l=e.getMarkId(r);if(c&&l){var f={name:t,startMarkId:c,endMarkId:l};s.default.publish(d,f)}}}},{key:"isSupported",value:function(){return!(!c.default||!c.default.getEntriesByName)}},{key:"init",value:function(){c.default.mark&&this.instrumentMark(),c.default.measure&&this.instrumentMeasure()}}]),e}()},function(e,t,n){"use strict";function r(){for(var e in l)if(l.hasOwnProperty(e)){var t=new l[e];t.isSupported()&&t.init()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(10),a=n(22),i=n(24),s=n(27),u=n(29),c=n(31),l={XHRProxy:o.XHRProxy,FetchProxy:a.FetchProxy,ResourceTimingProxy:i.ResourceTimingProxy,NavigationTimingProxy:s.NavigationTimingProxy,ConsoleProxy:u.ConsoleProxy,PerformanceProxy:c.PerformanceProxy}}]);
//# sourceMappingURL=agent.js.map